<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browser Compatibility Test - Siege of Neverwinter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .pass {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .fail {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
            padding: 15px;
            margin: 20px 0;
        }
        h1 {
            color: #8b0000;
        }
        .summary {
            font-size: 1.2em;
            font-weight: bold;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Browser Compatibility Test</h1>
    <p>This page tests if your browser supports all features required by Siege of Neverwinter.</p>
    
    <div id="results"></div>
    <div id="summary"></div>
    
    <div class="info">
        <strong>Recommended Browsers:</strong>
        <ul>
            <li>Chrome 90+</li>
            <li>Firefox 88+</li>
            <li>Safari 14+</li>
            <li>Edge 90+</li>
        </ul>
    </div>

    <script type="module">
        const results = [];
        
        function test(name, condition) {
            const passed = condition();
            results.push({ name, passed });
            return passed;
        }
        
        function displayResults() {
            const resultsDiv = document.getElementById('results');
            const summaryDiv = document.getElementById('summary');
            
            let html = '<h2>Test Results</h2>';
            let passCount = 0;
            
            results.forEach(result => {
                const className = result.passed ? 'pass' : 'fail';
                const status = result.passed ? '✓ PASS' : '✗ FAIL';
                html += `<div class="test-result ${className}">${status}: ${result.name}</div>`;
                if (result.passed) passCount++;
            });
            
            resultsDiv.innerHTML = html;
            
            const allPassed = passCount === results.length;
            const summaryClass = allPassed ? 'pass' : 'fail';
            summaryDiv.innerHTML = `
                <div class="test-result ${summaryClass} summary">
                    ${passCount}/${results.length} tests passed
                    ${allPassed ? '- Your browser is fully compatible!' : '- Some features may not work'}
                </div>
            `;
        }
        
        // Run tests
        test('ES6 Modules', () => {
            try {
                return typeof import !== 'undefined';
            } catch {
                return false;
            }
        });
        
        test('Fetch API', () => typeof fetch === 'function');
        test('Promise', () => typeof Promise === 'function');
        test('Async/Await', () => {
            try {
                eval('(async () => {})');
                return true;
            } catch {
                return false;
            }
        });
        
        test('Map', () => typeof Map === 'function');
        test('Set', () => typeof Set === 'function');
        test('localStorage', () => typeof localStorage !== 'undefined');
        test('sessionStorage', () => typeof sessionStorage !== 'undefined');
        
        test('CSS Grid', () => {
            const div = document.createElement('div');
            return typeof div.style.grid !== 'undefined';
        });
        
        test('CSS Flexbox', () => {
            const div = document.createElement('div');
            return typeof div.style.flex !== 'undefined';
        });
        
        test('Performance API', () => typeof performance !== 'undefined' && typeof performance.now === 'function');
        
        test('SVG Support', () => {
            return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1");
        });
        
        test('JSON', () => typeof JSON !== 'undefined' && typeof JSON.parse === 'function');
        
        test('Array Methods', () => {
            return typeof Array.prototype.map === 'function' &&
                   typeof Array.prototype.filter === 'function' &&
                   typeof Array.prototype.find === 'function';
        });
        
        test('Object Methods', () => {
            return typeof Object.keys === 'function' &&
                   typeof Object.assign === 'function';
        });
        
        test('Template Literals', () => {
            try {
                eval('`test`');
                return true;
            } catch {
                return false;
            }
        });
        
        test('Arrow Functions', () => {
            try {
                eval('() => {}');
                return true;
            } catch {
                return false;
            }
        });
        
        test('Destructuring', () => {
            try {
                eval('const {a} = {a: 1}');
                return true;
            } catch {
                return false;
            }
        });
        
        test('Spread Operator', () => {
            try {
                eval('[...[], 1]');
                return true;
            } catch {
                return false;
            }
        });
        
        test('ARIA Support', () => {
            const div = document.createElement('div');
            div.setAttribute('role', 'button');
            return div.getAttribute('role') === 'button';
        });
        
        // Display results
        displayResults();
    </script>
</body>
</html>
